services:
  openclaw:
    container_name: openclaw
    build:
      context: .
      dockerfile: Dockerfile
      args:
        NODE_VERSION: ${NODE_VERSION:-22.22.0}
        OPENCLAW_REF: ${OPENCLAW_REF:-v2026.2.15}
        PLAYWRIGHT_IMAGE_TAG: ${PLAYWRIGHT_IMAGE_TAG:-v1.58.2-noble}
    environment:
      AI_PROVIDER: ${AI_PROVIDER:-openai}
      OPENAI_API_KEY: ${OPENAI_API_KEY:-}
      OPENAI_MODEL: ${OPENAI_MODEL:-o4-mini}
      OPENAI_BASE_URL: ${OPENAI_BASE_URL:-https://api.openai.com/v1}
      OPENAI_TEMPERATURE: ${OPENAI_TEMPERATURE:-0.7}
      ANTHROPIC_API_KEY: ${ANTHROPIC_API_KEY:-}
      ANTHROPIC_MODEL: ${ANTHROPIC_MODEL:-claude-sonnet-4-20250514}
      ANTHROPIC_TEMPERATURE: ${ANTHROPIC_TEMPERATURE:-0.7}
      GOOGLE_GENERATIVE_AI_API_KEY: ${GOOGLE_GENERATIVE_AI_API_KEY:-}
      GOOGLE_GENERATIVE_AI_MODEL: ${GOOGLE_GENERATIVE_AI_MODEL:-gemini-2.5-pro}
      GOOGLE_GENERATIVE_AI_TEMPERATURE: ${GOOGLE_GENERATIVE_AI_TEMPERATURE:-0.7}
      AGENT_NAME: ${AGENT_NAME:-Claw}
      SOUL_FILE: ${SOUL_FILE:-default.soul.md}
      CONFIRMATION_MODE: ${CONFIRMATION_MODE:-suggest}
      AGENT_STORAGE_PATH: ${AGENT_STORAGE_PATH:-/home/openclaw/.openclaw/storage/agent.json}
      SQLITE_DB_PATH: ${SQLITE_DB_PATH:-/home/openclaw/.openclaw/storage/memory.db}
      BROWSER_PROFILE_PATH: ${BROWSER_PROFILE_PATH:-/home/openclaw/.openclaw/browser-profile}
      WORKSPACE_PATH: ${WORKSPACE_PATH:-/home/openclaw/.openclaw/workspace}
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN:-}
      TELEGRAM_ALLOWED_USER_IDS: ${TELEGRAM_ALLOWED_USER_IDS:-}
      DISCORD_BOT_TOKEN: ${DISCORD_BOT_TOKEN:-}
      DISCORD_ALLOWED_USER_IDS: ${DISCORD_ALLOWED_USER_IDS:-}
      NODE_ENV: ${NODE_ENV:-production}
    volumes:
      - ./data/storage:/home/openclaw/.openclaw/storage
      - ./data/browser:/home/openclaw/.openclaw/browser-profile
      - ./workspace:/home/openclaw/.openclaw/workspace
    stdin_open: true
    tty: true
    restart: unless-stopped
